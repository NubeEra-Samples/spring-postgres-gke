gcloud config set project prj2406
gcloud config get-value project

ZONE
# gcloud compute zones list
# gcloud config set compute/zone asia-south1-a              

REGION
#gcloud compute regions list
gcloud config set compute/region asia-south1


Prepare Container from GCR
# gcloud builds submit --tag gcr.io/prj2406/helloworld-gke .


Troubleshooting Nodes in Kubernetes Cluster
#  kubectl cluster-info dump
Master Nodes:
# /var/log/kube-apiserver.log
# /var/log/kube-scheduler.log
# /var/log/kube-controller-manager.log
Worker Nodes:
# /var/log/kubelet.log
# /var/log/kube-proxy.log


Create Spring Deployment
# kubectl apply -f 01.hdeployment.yaml
# kubectl get pods
# kubectl get deployments

# kubectl apply -f 02.hservice.yaml


#Create 02. CLUSTER FOR DATABASE(POSTGRES)
# gcloud container clusters create "postgres-gke-regional" \
  --region "us-central1" \
  --machine-type "e2-standard-2" --disk-type "pd-standard" --disk-size "100" \
  --num-nodes "1" --node-locations "us-central1-b","us-central1-c"


# gcloud container clusters get-credentials postgres-gke-regional --region "us-central1"

# kubectl apply -f 03.postgres-pv.yaml

# kubectl apply -f 04.postgres-deployment.yaml

# kubectl apply -f 05.postgres-service.yaml

POD=`kubectl get pods -l app=postgres -o wide | grep -v NAME | awk '{print $1}'`
kubectl exec -it $POD -- psql -U postgres

#POSTGRES SQL
create database gke_db;
\c gke_db;
CREATE TABLE test(
   data VARCHAR (255) NULL
);
insert into test values
  ('Learning GKE is fun'),
  ('Databases on GKE are easy');
Select * from test;
\q

#POSTGRES SHELL(BASH)
# kubectl exec --stdin --tty $POD -- /bin/bash
postgres_shell# hostname -I | awk '{print $1}'



